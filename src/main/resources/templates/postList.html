<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>장세웅의 게시판</title>
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<main>
    <div class="container p-5">
        <form>
        <h2>📋 게시글 목록</h2><br>
            <div class="input-group mb-4">
                <span class="input-group-text" id="inputGroup-sizing-default">검색</span>
                <select class="form-select">
                    <option selected>제목</option>
                    <option value="1">내용</option>
                    <option value="2">작성자</option>
                    <option value="3">일시</option>
                </select>
                <input type="text" class="form-control" placeholder="글을 입력하세요.">
                <input type="submit" class="btn btn-primary" value="검색">
            </div>
            <table class="table table-striped">
                <thead>
                <tr style="text-align: center">
                    <th>번호</th>
                    <th>일시</th>
                    <th>제목</th>
                    <th>작성자</th>
                </tr>
                </thead>
                <tbody>
                <tr style="text-align: center" th:each="value : ${postDtos}">
                    <td th:text="*{value.id}"></td>
                    <td th:text="*{value.writeTime}"></td>
                    <td th:text="*{value.title}"></td>
                    <td th:text="*{value.author}"></td>
                </tr>
                </tbody>
            </table>

            <div class="pt-5">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center"
                        th:with="start=${T(Math).floor(postDtos.number/maxPage)*maxPage + 1},
                        end=(${(postDtos.totalPages == 0) ? 1 : (start + (maxPage - 1) < postDtos.totalPages ? start + (maxPage - 1) : postDtos.totalPages)})">
                        <li class="page-item" th:if="${start > 1}">
                            <a class="page-link" th:href="|@{/member/postList(page=0)}|">처음</a>
                        </li>
                        <li class="page-item" th:if="${start > 1}">
                            <a class="page-link" th:href="|@{/member/postList(page=${start - maxPage})}|">이전</a>
                        </li>
                        <li class="page-item" th:each="page : ${#numbers.sequence(start, end)}">
                            <a class="page-link" th:text="${page}" th:href="|@{/member/postList(page=${page - 1})}|">1</a>
                        </li>
                        <li class="page-item" th:if="${end < postDtos.totalPages}">
                            <a class="page-link" th:href="|@{/member/postList(page=${start + maxPage})}|">다음</a>
                        </li>
                        <li class="page-item" th:if="${end < postDtos.totalPages}" th:href="|@{/member/postList(page=${postDtos.totalPages - 1})}|">
                            <a class="page-link" href="#">마지막</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </form>
    </div>
</main>
</body>
</html>